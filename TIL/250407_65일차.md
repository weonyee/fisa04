## 오늘 한 것

### FastAPI

---

## 배운 내용

### FastAPI?

- python 기반의 웹 프레임워크
- stalette라는 프레임워크 통한 ASGI 기반(비동기 지원)
    - **비동기** 작업을 기다리지 않고 동시에 여러 작업을 처리할 수 있게 하는 방식
        - 어떤 요청을 보낸 다음 그 결과가 올 때까지 기다리지 않고, 그 사이에 다른 작업을 할 수 있게 해줌
- 자동 OpenAPI 문서 생성
- 타입 힌팅 기반 코드로 빠르고 명확한 개발 가능
- pydantic을 이용한 강력한 데이터 검증

### FastAPI 사용이 증가하는 이유

- **비동기 프로그래밍 지원** : 파이썬의 `async/await` 기능을 자체적으로 지원하여 고성능 API 서버 개발에 적합
- **자동 문서화 기능** : openAPI와 redoc 문서를 코드만으로 자동 생성하여 API 테스트 및 문서화 편리
- **빠른 성능** : starlette 기반으로 동작, 비동기 처리를 통해 성능 뛰어남
- **타입 기반 개발** : 타입 힌팅을 적극 활용하여 IDE 지원, 자동 완성, 정적 분석 도구와의 연계가 용이
- **생산성과 유지보수성 향상** : pydantic을 이용한 데이터 검증, 타입 기반 구조는 코드의 명확성과 유지보수성에 큰 장점 제공
- **마이크로 서비스 및 클라우드 친화적** : 경량화된 구조로 마이크로 서비스, 컨테이너 기반 배포에 적합
- **커뮤니티와 생태계 성장** : 빠르게 성장 중인 커뮤니티와 다양한 확장 도구가 활성화되어 있음

```
# 입구파일
# pip install fastapi
from fastapi import FastAPI

app = FastAPI() # app 객체

@app.get("/") # root 주소로 접속
def read_root():
    return {"Hello": "World"}

# {변수명}으로 기본 경로 매개변수를 사용합니다
# str으로 전달됨
@app.get("/items/{item_id}") # <변수명>
def get_item(item_id):
    return {"item_id": item_id}

@app.get("/items2/{item_id}") # <변수명>
def get_item2(item_id: float): # (변수명: 자료형)
    return {"item_id": item_id}
```

### Pydantic

- FastAPI에서 데이터 모델을 정의하고 검증하는 데 사용하는 핵심 라이브러리
- 파이썬의 타입 힌트를 바탕으로 데이터 유효성 검사 → 직렬화, 역직렬화 자동 처리

주요 특징

- 타입 힌트 기반 데이터 유효성 검사
- JSON 자동 직렬화 및 역직렬화
- 빠르고 가벼운 성능
- 오류 메시지가 명확하여 디버깅에 용이함

### Depends 기능

- `depends` 기능은 공통 로직(예. 인증, DB연결, 공통 검증 등)을 라우터 함수 바깥으로 분리해 재사용할 수 있도록 해줌
    - 코드 재사용성, 테스트 용이성, 유지보수성 높이는 데 중요한 역할을 함

사용 목적

- 인증/인가 처리(토큰 검사, 사용자 인증)
- 데이터베이스 세션 관리
- 요청 공통 파라미터 추출 및 검증
- 의존성 간 계층화 (다른 의존성 안에서 또 `depends()` 사용 가능

### APIRouter

> `Flask` 의 블루프린트 같은 기능
> 
- FastAPI에서 라우팅 기능을 모듈화할 수 있도록 도와주는 객체
- 여러 라우트를 하나의 파일 또는 클래스에 묶어 관리할 수 있어 유지보수가 쉬워짐
- 대규모 프로젝트 구조에 유리

사용 목적

- 라우트를 논리적으로 구분(예. `/users` , `/items` )
- 여러 파일에 걸쳐 라우터 정의 후 메인 앱에 통합
- 공통 prefix, 태그, 종속성 등을 묶어서 설정
