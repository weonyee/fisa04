## 오늘 한 것
### MLOps
### 초초초미니 프로젝트 - 단순 계산기 만들기(실패)

---

## 배운 내용

### 진자(Jinja) 템플릿

- 파이썬 기반의 템플릿 엔진
- 웹 개발에서 **HTML을 동적으로 생성**하는 데 사용됨
- Flask, Django 같은 웹 프레임워크에서 HTML을 동적으로 렌더링할 때 활용
- 변수 삽입, 제어문, 필터링 지원

```jsx
<p>안녕하세요, {{ name }}님!</p>

{% if age >= 18 %}
    <p>성인입니다.</p>
{% else %}
    <p>미성년자입니다.</p>
{% endif %}

<ul>
{% for item in items %}
    <li>{{ item }}</li>
{% endfor %}
</ul>

<p>{{ username | upper }}</p>  <!-- 대문자로 변환 -->
```

```jsx
✅ Flask에서 HTML 렌더링할 때

from flask import Flask, render_template

app = Flask(__name__)

@app.route("/")
def home():
    return render_template("index.html", name="Alice")

if __name__ == "__main__":
    app.run(debug=True)

```

+) **프레임워크** 소프트웨어 개발을 쉽게 할 수 있도록 만들어진 구조(개발 도구 세트) - 전체 구조 제공(개발 흐름 제어: 반드시 따라야 함)

---

### XCom

- **작업 간 데이터 전달을 위한 메커니즘**
- airflow에서 작업은 독립적으로 실행되기 때문에 한 작업에서 생성된 데이터를 다른 작업에서 사용하려면 이를 사용해야 함

**특징**

- key-value 형태
- task 간 데이터 전달
- 자동 저장
- airflow 메타데이터 DB에 저장됨

---

### DAG 작성

- 작성할 줄 아는 것은 굉장한 자산이 된다.

```python
# 필요한 모듈 import

# 필요로 하는 변수, 함수 정의

# DAG의 전반적인 정의

# TASK 정의
처음에는 EmptyOperator로 확인
-> 추후에 빈칸을 채워줌
# TASK 간의 흐름
```

---

### MLOps

0단계: 수동 프로세스

- 실험적 단계, 개발자가 모든 과정을 수동으로

1단계: 부분적 자동화

- 일부 자동화를 적용하여 운영 효율성 높임

2단계: 완전 자동화

- 완전 자동화된 ML파이프라인을 구축하여 모델 운영을 극대화

→ 장점

- 운영 비용 절감 및 효율성 증가
- 모델 성능 저하를 빠르게 감지하고 대응 가능
- 실시간 데이터 업데이트를 반영하여 최신 상태 유지

**CI/CD(Continuous Integration & Continuous Deployment/Delivery)**

- 소프트웨어 개발에서 코드 변경 사항을 자동화된 방식으로 통합하고 배포하는 프로세스

### MLOps 핵심 개념

1. 자동화
    - 모델 개발, 배포, 모니터링까지 자동화된 파이프라인
    - 코드, 데이터, 모델 버전 관리로 재현성 보장
2. 모델 버전 관리
    - 모델이 계속 업데이트되므로 버전 관리(VCS) 필요
    - MLFlow, DVC(Data Version Control) 같은 툴 사용
3. 데이터 및 피처 엔지니어링
    - 데이터 수집, 정제, 피처 엔지니어링을 자동화된 파이프라인 구축
    - 데이터 드리프트 감지: 데이터 특성이 변할 경우 감지
4. 모델 배포
    - 모델을 API 형태로 제공하거나 컨테이너(Docker, Kubernetes)로 배포
    - 서버리스 배포(AWS lambda, Google cloud Functions)도 가능
5. 모델 모니터링 및 성능 관리
    - 모델 성능이 시간이 지나면서 저하되므로, 모니터링 시스템 구축
    - 로그 수집, A/B 테스트, 재학습(재훈련) 자동화

### MLOps 흐름

1. 데이터 수집 & 전처리
2. 모델 학습 & 실험
3. 모델 배포
4. 모델 모니터링
5. 모델 재학습 & 업데이트

---

### MLflow

- ML 라이프 사이클을 end-to-end로 관리할 수 있는 오픈소스 툴
- 모델의 변경 사항, 결과 및 버전을 기록하는 기록장
    - 결과를 기억하거나 잃어버릴 걱정 안해도 됨
- 머신러닝의 라이프사이클을 관리하는데 도움을 주는 도구
- 실험 추적, 모델 저장, 모델 배포를 쉽게 만들어줌
